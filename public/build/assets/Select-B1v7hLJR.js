import{b as u,f as xe,d as Se,n as ve,j as a}from"./app-4a17Pub4.js";import{u as we}from"./use-resolved-styles-api-nyfOONey.js";import{g as ye,a as Ce,O as De}from"./OptionsDropdown-B7k9BRCW.js";import{u as Ie,C as i}from"./Combobox-Bd-ojIJS.js";import{I as z}from"./InputBase-DVeQGwl5.js";import{u as H}from"./use-uncontrolled-BGuEEBtS.js";function Oe(p){const f=u.useRef();return u.useEffect(()=>{f.current=p},[p]),f.current}const Pe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},L=xe((p,f)=>{const _=Se("Select",Pe,p),{classNames:U,styles:W,unstyled:h,vars:je,dropdownOpened:$,defaultDropdownOpened:q,onDropdownClose:v,onDropdownOpen:w,onFocus:y,onBlur:C,onClick:D,onChange:G,data:k,value:m,defaultValue:J,selectFirstOptionOnChange:I,onOptionSubmit:O,comboboxProps:K,readOnly:b,disabled:g,filter:Q,limit:X,withScrollArea:Y,maxDropdownHeight:Z,size:x,searchable:n,rightSection:ee,checkIconPosition:oe,withCheckIcon:te,nothingFoundMessage:F,name:se,form:le,searchValue:ae,defaultSearchValue:ne,onSearchChange:re,allowDeselect:ce,error:N,rightSectionPointerEvents:ie,id:ue,clearable:de,clearButtonProps:pe,hiddenInputProps:fe,renderOption:he,onClear:P,autoComplete:me,scrollAreaProps:be,...S}=_,j=u.useMemo(()=>ye(k),[k]),d=u.useMemo(()=>Ce(j),[j]),B=ve(ue),[s,A,ge]=H({value:m,defaultValue:J,finalValue:null,onChange:G}),o=typeof s=="string"?d[s]:void 0,r=Oe(o),[V,c]=H({value:ae,defaultValue:ne,finalValue:o?o.label:"",onChange:re}),t=Ie({opened:$,defaultOpened:q,onDropdownOpen:()=>{w==null||w(),t.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{v==null||v(),t.resetSelectedOption()}}),{resolvedClassNames:M,resolvedStyles:R}=we({props:_,styles:W,classNames:U});u.useEffect(()=>{I&&t.selectFirstOption()},[I,s]),u.useEffect(()=>{m===null&&c(""),typeof m=="string"&&o&&((r==null?void 0:r.value)!==o.value||(r==null?void 0:r.label)!==o.label)&&c(o.label)},[m,o]);const T=de&&!!s&&!g&&!b&&a.jsx(i.ClearButton,{size:x,...pe,onClear:()=>{A(null,null),c(""),P==null||P()}});return a.jsxs(a.Fragment,{children:[a.jsxs(i,{store:t,__staticSelector:"Select",classNames:M,styles:R,unstyled:h,readOnly:b,onOptionSubmit:e=>{O==null||O(e);const l=ce&&d[e].value===s?null:d[e],E=l?l.value:null;E!==s&&A(E,l),!ge&&c(typeof E=="string"&&(l==null?void 0:l.label)||""),t.closeDropdown()},size:x,...K,children:[a.jsx(i.Target,{targetType:n?"input":"button",autoComplete:me,children:a.jsx(z,{id:B,ref:f,rightSection:ee||T||a.jsx(i.Chevron,{size:x,error:N,unstyled:h}),rightSectionPointerEvents:ie||(T?"all":"none"),...S,size:x,__staticSelector:"Select",disabled:g,readOnly:b||!n,value:V,onChange:e=>{c(e.currentTarget.value),t.openDropdown(),I&&t.selectFirstOption()},onFocus:e=>{n&&t.openDropdown(),y==null||y(e)},onBlur:e=>{var l;n&&t.closeDropdown(),c(s!=null&&((l=d[s])==null?void 0:l.label)||""),C==null||C(e)},onClick:e=>{n?t.openDropdown():t.toggleDropdown(),D==null||D(e)},classNames:M,styles:R,unstyled:h,pointer:!n,error:N})}),a.jsx(De,{data:j,hidden:b||g,filter:Q,search:V,limit:X,hiddenWhenEmpty:!F,withScrollArea:Y,maxDropdownHeight:Z,filterOptions:n&&(o==null?void 0:o.label)!==V,value:s,checkIconPosition:oe,withCheckIcon:te,nothingFoundMessage:F,unstyled:h,labelId:S.label?`${B}-label`:void 0,"aria-label":S.label?void 0:S["aria-label"],renderOption:he,scrollAreaProps:be})]}),a.jsx(i.HiddenInput,{value:s,name:se,form:le,disabled:g,...fe})]})});L.classes={...z.classes,...i.classes};L.displayName="@mantine/core/Select";export{L as S};
