import{f as Qe,d as Xe,n as Ye,s as Ze,e as Re,j as s,b as et}from"./app-4a17Pub4.js";import{u as tt}from"./use-resolved-styles-api-nyfOONey.js";import{i as st,g as ot,a as rt,O as lt}from"./OptionsDropdown-B7k9BRCW.js";import{u as nt,C as c}from"./Combobox-Bd-ojIJS.js";import{I as at}from"./InputBase-DVeQGwl5.js";import{P as H}from"./Pill-BLrl2ix2.js";import{P as q}from"./PillsInput-B9htvQA-.js";import{u as K}from"./use-uncontrolled-BGuEEBtS.js";function it({data:x,value:P}){const a=P.map(i=>i.trim().toLowerCase());return x.reduce((i,d)=>(st(d)?i.push({group:d.group,items:d.items.filter(m=>a.indexOf(m.value.toLowerCase().trim())===-1)}):a.indexOf(d.value.toLowerCase().trim())===-1&&i.push(d),i),[])}const dt={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},U=Qe((x,P)=>{const a=Xe("MultiSelect",dt,x),{classNames:v,className:i,style:d,styles:m,unstyled:n,vars:pt,size:g,value:J,defaultValue:Q,onChange:X,onKeyDown:w,variant:Y,data:Z,dropdownOpened:R,defaultDropdownOpened:ee,onDropdownOpen:te,onDropdownClose:y,selectFirstOptionOnChange:b,onOptionSubmit:O,comboboxProps:se,filter:oe,limit:re,withScrollArea:le,maxDropdownHeight:ne,searchValue:ae,defaultSearchValue:ie,onSearchChange:de,readOnly:h,disabled:p,onFocus:C,onBlur:D,onPaste:ct,radius:pe,rightSection:ce,rightSectionWidth:ue,rightSectionPointerEvents:B,rightSectionProps:he,leftSection:fe,leftSectionWidth:me,leftSectionPointerEvents:ge,leftSectionProps:Se,inputContainer:xe,inputWrapperOrder:Pe,withAsterisk:ve,labelProps:we,descriptionProps:ye,errorProps:be,wrapperProps:Oe,description:Ce,label:I,error:L,maxValues:De,searchable:r,nothingFoundMessage:N,withCheckIcon:Ie,checkIconPosition:Ve,hidePickedOptions:je,withErrorStyles:ke,name:Ee,form:_e,id:Me,clearable:Fe,clearButtonProps:Be,hiddenInputProps:Le,placeholder:A,hiddenInputValuesDivider:Ne,required:Ae,mod:We,renderOption:Te,onRemove:l,onClear:V,scrollAreaProps:$e,...W}=a,j=Ye(Me),k=ot(Z),u=rt(k),o=nt({opened:R,defaultOpened:ee,onDropdownOpen:te,onDropdownClose:()=>{y==null||y(),o.resetSelectedOption()}}),{styleProps:ze,rest:{type:ut,autoComplete:Ge,...He}}=Ze(W),[t,f]=K({value:J,defaultValue:Q,finalValue:[],onChange:X}),[E,S]=K({value:ae,defaultValue:ie,finalValue:"",onChange:de}),_=Re({name:"MultiSelect",classes:{},props:a,classNames:v,styles:m,unstyled:n}),{resolvedClassNames:T,resolvedStyles:$}=tt({props:a,styles:m,classNames:v}),qe=e=>{w==null||w(e),e.key===" "&&!r&&(e.preventDefault(),o.toggleDropdown()),e.key==="Backspace"&&E.length===0&&t.length>0&&(l==null||l(t[t.length-1]),f(t.slice(0,t.length-1)))},Ke=t.map((e,F)=>{var z,G;return s.jsx(H,{withRemoveButton:!h&&!((z=u[e])!=null&&z.disabled),onRemove:()=>{f(t.filter(Je=>e!==Je)),l==null||l(e)},unstyled:n,disabled:p,..._("pill"),children:((G=u[e])==null?void 0:G.label)||e},`${e}-${F}`)});et.useEffect(()=>{b&&o.selectFirstOption()},[b,t]);const M=Fe&&t.length>0&&!p&&!h&&s.jsx(c.ClearButton,{size:g,...Be,onClear:()=>{V==null||V(),f([]),S("")}}),Ue=it({data:k,value:t});return s.jsxs(s.Fragment,{children:[s.jsxs(c,{store:o,classNames:T,styles:$,unstyled:n,size:g,readOnly:h,__staticSelector:"MultiSelect",onOptionSubmit:e=>{O==null||O(e),S(""),o.updateSelectedOptionIndex("selected"),t.includes(u[e].value)?(f(t.filter(F=>F!==u[e].value)),l==null||l(u[e].value)):t.length<De&&f([...t,u[e].value])},...se,children:[s.jsx(c.DropdownTarget,{children:s.jsx(q,{...ze,__staticSelector:"MultiSelect",classNames:T,styles:$,unstyled:n,size:g,className:i,style:d,variant:Y,disabled:p,radius:pe,rightSection:ce||M||s.jsx(c.Chevron,{size:g,error:L,unstyled:n}),rightSectionPointerEvents:B||(M?"all":"none"),rightSectionWidth:ue,rightSectionProps:he,leftSection:fe,leftSectionWidth:me,leftSectionPointerEvents:ge,leftSectionProps:Se,inputContainer:xe,inputWrapperOrder:Pe,withAsterisk:ve,labelProps:we,descriptionProps:ye,errorProps:be,wrapperProps:Oe,description:Ce,label:I,error:L,multiline:!0,withErrorStyles:ke,__stylesApiProps:{...a,rightSectionPointerEvents:B||(M?"all":"none"),multiline:!0},pointer:!r,onClick:()=>r?o.openDropdown():o.toggleDropdown(),"data-expanded":o.dropdownOpened||void 0,id:j,required:Ae,mod:We,children:s.jsxs(H.Group,{disabled:p,unstyled:n,..._("pillsList"),children:[Ke,s.jsx(c.EventsTarget,{autoComplete:Ge,children:s.jsx(q.Field,{...He,ref:P,id:j,placeholder:A,type:!r&&!A?"hidden":"visible",..._("inputField"),unstyled:n,onFocus:e=>{C==null||C(e),r&&o.openDropdown()},onBlur:e=>{D==null||D(e),o.closeDropdown(),S("")},onKeyDown:qe,value:E,onChange:e=>{S(e.currentTarget.value),r&&o.openDropdown(),b&&o.selectFirstOption()},disabled:p,readOnly:h||!r,pointer:!r})})]})})}),s.jsx(lt,{data:je?Ue:k,hidden:h||p,filter:oe,search:E,limit:re,hiddenWhenEmpty:!N,withScrollArea:le,maxDropdownHeight:ne,filterOptions:r,value:t,checkIconPosition:Ve,withCheckIcon:Ie,nothingFoundMessage:N,unstyled:n,labelId:I?`${j}-label`:void 0,"aria-label":I?void 0:W["aria-label"],renderOption:Te,scrollAreaProps:$e})]}),s.jsx(c.HiddenInput,{name:Ee,valuesDivider:Ne,value:t,form:_e,disabled:p,...Le})]})});U.classes={...at.classes,...c.classes};U.displayName="@mantine/core/MultiSelect";export{U as M};
