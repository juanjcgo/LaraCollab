import{b as d,Q as ae,j as s,f as le,d as ie,e as ce,k as pe,h as ue,i as R}from"./app-4a17Pub4.js";import{u as de}from"./use-resolved-styles-api-nyfOONey.js";import{A as fe}from"./ActionIcon-ni5mTX2i.js";import{c as k,p as g,i as v,C as we}from"./ColorPicker-C94QZAI7.js";import{C as he}from"./ColorSwatch-HXcgr9nk.js";import{I as V}from"./Input-B6kN7ymh.js";import{u as me,I as ve}from"./InputBase-DVeQGwl5.js";import{P as z}from"./Popover-CBbffI_i.js";import{u as ye}from"./use-uncontrolled-BGuEEBtS.js";function Ce(){return navigator.userAgent.includes("OPR")}function Ie(){const[r,t]=d.useState(!1);ae(()=>{t(typeof window<"u"&&!Ce()&&"EyeDropper"in window)},[]);const i=d.useCallback((f={})=>r?new window.EyeDropper().open(f):Promise.resolve(void 0),[r]);return{supported:r,open:i}}function xe({style:r,...t}){return s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...r},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[s.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),s.jsx("path",{d:"M11 7l6 6"}),s.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}var O={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const E={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},Se=ue((r,{size:t})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":R(t,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":R(t,"ci-preview-size")}})),A=le((r,t)=>{const i=ie("ColorInput",E,r),{classNames:f,styles:y,unstyled:c,disallowInput:_,fixOnBlur:B,popoverProps:H,withPreview:M,withEyeDropper:L,eyeDropperIcon:T,closeOnColorSwatchClick:G,eyeDropperButtonProps:n,value:U,defaultValue:W,onChange:F,onChangeEnd:a,onClick:C,onFocus:I,onBlur:x,inputProps:S,format:p,wrapperProps:Q,readOnly:P,withPicker:b,swatches:D,disabled:N,leftSection:q,rightSection:J,swatchesPerRow:K,...X}=me("ColorInput",E,r),j=ce({name:"ColorInput",props:i,classes:O,classNames:f,styles:y,unstyled:c,rootSelector:"wrapper",vars:i.vars,varsResolver:Se}),{resolvedClassNames:w,resolvedStyles:h}=de({classNames:f,styles:y,props:i}),[Y,m]=d.useState(!1),[Z,$]=d.useState(""),[o,u]=ye({value:U,defaultValue:W,finalValue:"",onChange:F}),{supported:ee,open:se}=Ie(),oe=s.jsx(fe,{...n,...j("eyeDropperButton",{className:n==null?void 0:n.className,style:n==null?void 0:n.style}),variant:"subtle",color:"gray",size:S.size,unstyled:c,onClick:()=>se().then(e=>{if(e!=null&&e.sRGBHex){const l=k(p,g(e.sRGBHex));u(l),a==null||a(l)}}).catch(()=>{}),children:T||s.jsx(xe,{...j("eyeDropperIcon")})}),re=e=>{I==null||I(e),m(!0)},te=e=>{B&&u(Z),x==null||x(e),m(!1)},ne=e=>{C==null||C(e),m(!0)};return d.useEffect(()=>{(v(o)||o.trim()==="")&&$(o)},[o]),pe(()=>{v(o)&&u(k(p,g(o)))},[p]),s.jsx(V.Wrapper,{...Q,classNames:w,styles:h,__staticSelector:"ColorInput",children:s.jsxs(z,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,...H,opened:Y,classNames:w,styles:h,unstyled:c,withRoles:!1,disabled:P||b===!1&&(!Array.isArray(D)||D.length===0),children:[s.jsx(z.Target,{children:s.jsx(V,{autoComplete:"off",...X,...S,classNames:w,styles:h,disabled:N,ref:t,__staticSelector:"ColorInput",onFocus:re,onBlur:te,onClick:ne,spellCheck:!1,value:o,onChange:e=>{const l=e.currentTarget.value;u(l),v(l)&&(a==null||a(k(p,g(l))))},leftSection:q||(M?s.jsx(he,{color:v(o)?o:"#fff",size:"var(--ci-preview-size)",...j("colorPreview")}):null),readOnly:_||P,pointer:_,unstyled:c,rightSection:J||(L&&!N&&!P&&ee?oe:null)})}),s.jsx(z.Dropdown,{onMouseDown:e=>e.preventDefault(),className:O.dropdown,children:s.jsx(we,{__staticSelector:"ColorInput",value:o,onChange:u,onChangeEnd:a,format:p,swatches:D,swatchesPerRow:K,withPicker:b,size:S.size,focusable:!1,unstyled:c,styles:h,classNames:w,onColorSwatchClick:()=>G&&m(!1)})})]})})});A.classes=ve.classes;A.displayName="@mantine/core/ColorInput";export{A as C};
