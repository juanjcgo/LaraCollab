import{x as u,f as N,j as P,a1 as ee,aq as te,F as se,b as B,d as Y}from"./app-4a17Pub4.js";import{s as H,H as ne,a as E,u as $,C as q,p as ae}from"./pick-calendar-levels-props-4bDM8Nej.js";import{u as re}from"./use-disclosure-CdCiEhD4.js";import{u as U}from"./use-resolved-styles-api-nyfOONey.js";import{u as oe}from"./InputBase-DVeQGwl5.js";import{I as V}from"./Input-B6kN7ymh.js";import{P as F}from"./Popover-CBbffI_i.js";function le({type:s,date:t,locale:r,format:o,labelSeparator:D}){const a=_=>u(_).locale(r).format(o);return s==="default"?t===null?"":a(t):s==="multiple"?t.map(a).join(", "):s==="range"&&Array.isArray(t)?t[0]&&t[1]?`${a(t[0])} ${D} ${a(t[1])}`:t[0]?`${a(t[0])} ${D} `:"":""}function ue({formatter:s,...t}){return(s||le)(t)}function ie({minDate:s,maxDate:t,timezone:r}){const o=H("add",new Date,r);return!s&&!t?o:s&&u(o).isBefore(s)?s:t&&u(o).isAfter(t)?t:o}var W={input:"m_6fa5e2aa"};const ce={},A=N((s,t)=>{const{inputProps:r,wrapperProps:o,placeholder:D,classNames:a,styles:_,unstyled:g,popoverProps:f,modalProps:e,dropdownType:i,children:m,formattedValue:p,dropdownHandlers:c,dropdownOpened:d,onClick:x,clearable:k,onClear:y,clearButtonProps:j,rightSection:h,shouldClear:w,readOnly:I,disabled:n,value:l,name:C,form:T,type:b,...R}=oe("PickerInputBase",ce,s),S=h||(k&&w&&!I&&!n?P.jsx(ee,{variant:"transparent",onClick:y,unstyled:g,size:r.size||"sm",...j}):null),v=()=>{b==="range"&&Array.isArray(l)&&l[0]&&!l[1]&&y(),c.close()};return P.jsxs(P.Fragment,{children:[i==="modal"&&!I&&P.jsx(te,{opened:d,onClose:v,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:g,...e,children:m}),P.jsx(V.Wrapper,{...o,children:P.jsxs(F,{position:"bottom-start",opened:d,trapFocus:!0,returnFocus:!0,unstyled:g,...f,disabled:(f==null?void 0:f.disabled)||i==="modal"||I,onClose:()=>{var z;(z=f==null?void 0:f.onClose)==null||z.call(f),v()},children:[P.jsx(F.Target,{children:P.jsx(V,{"data-dates-input":!0,"data-read-only":I||void 0,disabled:n,component:"button",type:"button",multiline:!0,onClick:z=>{x==null||x(z),c.toggle()},rightSection:S,...r,ref:t,classNames:{...a,input:se(W.input,a==null?void 0:a.input)},...R,children:p||P.jsx(V.Placeholder,{error:r.error,unstyled:g,className:a==null?void 0:a.placeholder,style:_==null?void 0:_.placeholder,children:D})})}),P.jsx(F.Dropdown,{"data-dates-dropdown":!0,children:m})]})}),P.jsx(ne,{value:l,name:C,form:T,type:b})]})});A.classes=W;A.displayName="@mantine/dates/PickerInputBase";function M(s,t){const r=[...t].sort((o,D)=>o.getTime()-D.getTime());return u(r[0]).startOf("day").subtract(1,"ms").isBefore(s)&&u(r[1]).endOf("day").add(1,"ms").isAfter(s)}function de({type:s,level:t,value:r,defaultValue:o,onChange:D,allowSingleDateInRange:a,allowDeselect:_,onMouseLeave:g,applyTimezone:f=!0}){const[e,i]=E({type:s,value:r,defaultValue:o,onChange:D,applyTimezone:f}),[m,p]=B.useState(s==="range"&&e[0]&&!e[1]?e[0]:null),[c,d]=B.useState(null),x=n=>{if(s==="range"){if(m instanceof Date&&!e[1]){if(u(n).isSame(m,t)&&!a){p(null),d(null),i([null,null]);return}const l=[n,m];l.sort((C,T)=>C.getTime()-T.getTime()),i(l),d(null),p(null);return}if(e[0]&&!e[1]&&u(n).isSame(e[0],t)&&!a){p(null),d(null),i([null,null]);return}i([n,null]),d(null),p(n);return}if(s==="multiple"){e.some(l=>u(l).isSame(n,t))?i(e.filter(l=>!u(l).isSame(n,t))):i([...e,n]);return}e&&_&&u(n).isSame(e,t)?i(null):i(n)},k=n=>m instanceof Date&&c instanceof Date?M(n,[c,m]):e[0]instanceof Date&&e[1]instanceof Date?M(n,e):!1,y=s==="range"?n=>{g==null||g(n),d(null)}:g,j=n=>e[0]instanceof Date&&u(n).isSame(e[0],t)?!(c&&u(c).isBefore(e[0])):!1,h=n=>e[1]instanceof Date?u(n).isSame(e[1],t):!(e[0]instanceof Date)||!c?!1:u(c).isBefore(e[0])&&u(n).isSame(e[0],t),w=n=>{if(s==="range")return{selected:e.some(C=>C&&u(C).isSame(n,t)),inRange:k(n),firstInRange:j(n),lastInRange:h(n),"data-autofocus":!!e[0]&&u(e[0]).isSame(n,t)||void 0};if(s==="multiple")return{selected:e.some(C=>C&&u(C).isSame(n,t)),"data-autofocus":!!e[0]&&u(e[0]).isSame(n,t)||void 0};const l=u(e).isSame(n,t);return{selected:l,"data-autofocus":l||void 0}},I=s==="range"&&m?d:()=>{};return B.useEffect(()=>{if(s!=="range")return;const n=e[0]==null&&e[1]==null,l=e[0]!=null&&e[1]!=null;(n||l)&&(p(null),d(null))},[e]),{onDateChange:x,onRootMouseLeave:y,onHoveredDateChange:I,getControlProps:w,_value:e,setValue:i}}const fe={type:"default",defaultLevel:"month",numberOfColumns:1},O=N((s,t)=>{const r=Y("DatePicker",fe,s),{classNames:o,styles:D,vars:a,type:_,defaultValue:g,value:f,onChange:e,__staticSelector:i,getDayProps:m,allowSingleDateInRange:p,allowDeselect:c,onMouseLeave:d,numberOfColumns:x,hideOutsideDates:k,__onDayMouseEnter:y,__onDayClick:j,__timezoneApplied:h,...w}=r,{onDateChange:I,onRootMouseLeave:n,onHoveredDateChange:l,getControlProps:C}=de({type:_,level:"day",allowDeselect:c,allowSingleDateInRange:p,value:f,defaultValue:g,onChange:e,onMouseLeave:d,applyTimezone:!h}),{resolvedClassNames:T,resolvedStyles:b}=U({classNames:o,styles:D,props:r}),R=$();return P.jsx(q,{ref:t,minLevel:"month",classNames:T,styles:b,__staticSelector:i||"DatePicker",onMouseLeave:n,numberOfColumns:x,hideOutsideDates:k??x!==1,__onDayMouseEnter:(S,v)=>{l(v),y==null||y(S,v)},__onDayClick:(S,v)=>{I(v),j==null||j(S,v)},getDayProps:S=>({...C(S),...m==null?void 0:m(S)}),...w,date:H("add",w.date,R.getTimezone(),h),__timezoneApplied:!0})});O.classes=q.classes;O.displayName="@mantine/dates/DatePicker";function me({type:s,value:t,defaultValue:r,onChange:o,locale:D,format:a,closeOnChange:_,sortDates:g,labelSeparator:f,valueFormatter:e}){const i=$(),[m,p]=re(!1),[c,d]=E({type:s,value:t,defaultValue:r,onChange:o}),x=ue({type:s,date:c,locale:i.getLocale(D),format:a,labelSeparator:i.getLabelSeparator(f),formatter:e}),k=h=>{_&&(s==="default"&&p.close(),s==="range"&&h[0]&&h[1]&&p.close()),d(g&&s==="multiple"?[...h].sort((w,I)=>w.getTime()-I.getTime()):h)},y=()=>k(s==="range"?[null,null]:s==="multiple"?[]:null),j=s==="range"?!!c[0]:s==="multiple"?c.length>0:c!==null;return{_value:c,setValue:k,onClear:y,shouldClear:j,formattedValue:x,dropdownOpened:m,dropdownHandlers:p}}const pe={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},G=N((s,t)=>{const r=Y("DatePickerInput",pe,s),{type:o,value:D,defaultValue:a,onChange:_,valueFormat:g,labelSeparator:f,locale:e,classNames:i,styles:m,unstyled:p,closeOnChange:c,size:d,variant:x,dropdownType:k,sortDates:y,minDate:j,maxDate:h,vars:w,defaultDate:I,valueFormatter:n,...l}=r,{resolvedClassNames:C,resolvedStyles:T}=U({classNames:i,styles:m,props:r}),{calendarProps:b,others:R}=ae(l),{_value:S,setValue:v,formattedValue:z,dropdownHandlers:J,dropdownOpened:K,onClear:Q,shouldClear:X}=me({type:o,value:D,defaultValue:a,onChange:_,locale:e,format:g,labelSeparator:f,closeOnChange:c,sortDates:y,valueFormatter:n}),Z=Array.isArray(S)?S[0]||I:S||I,L=$();return P.jsx(A,{formattedValue:z,dropdownOpened:K,dropdownHandlers:J,classNames:C,styles:T,unstyled:p,ref:t,onClear:Q,shouldClear:X,value:S,size:d,variant:x,dropdownType:k,...R,type:o,__staticSelector:"DatePickerInput",children:P.jsx(O,{...b,size:d,variant:x,type:o,value:S,defaultDate:Z||ie({maxDate:h,minDate:j,timezone:L.getTimezone()}),onChange:v,locale:e,classNames:C,styles:T,unstyled:p,__staticSelector:"DatePickerInput",__stopPropagation:k==="popover",minDate:j,maxDate:h,date:H("add",b.date,L.getTimezone()),__timezoneApplied:!0})})});G.classes={...A.classes,...O.classes};G.displayName="@mantine/dates/DatePickerInput";export{G as D};
