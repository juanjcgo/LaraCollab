import{b as i,P as I}from"./app-4a17Pub4.js";function C(e,a="use-local-storage"){try{return JSON.stringify(e)}catch{throw new Error(`@mantine/hooks ${a}: Failed to serialize the value`)}}function k(e){try{return e&&JSON.parse(e)}catch{return e}}function p(e){return{getItem:r=>{try{return window[e].getItem(r)}catch{return console.warn("use-local-storage: Failed to get value from storage, localStorage is blocked"),null}},setItem:(r,l)=>{try{window[e].setItem(r,l)}catch{console.warn("use-local-storage: Failed to set value to storage, localStorage is blocked")}},removeItem:r=>{try{window[e].removeItem(r)}catch{console.warn("use-local-storage: Failed to remove value from storage, localStorage is blocked")}}}}function F(e,a){const s="mantine-local-storage",{getItem:f,setItem:r,removeItem:l}=p(e);return function({key:o,defaultValue:n,getInitialValueInEffect:E=!0,deserialize:v=k,serialize:S=w=>C(w,a)}){const w=i.useCallback(t=>{let c;try{c=typeof window>"u"||!(e in window)||window[e]===null||!!t}catch{c=!0}if(c)return n;const u=f(o);return u!==null?v(u):n},[o,n]),[d,g]=i.useState(w(E)),m=i.useCallback(t=>{t instanceof Function?g(c=>{const u=t(c);return r(o,S(u)),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:t(c)}})),u}):(r(o,S(t)),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:t}})),g(t))},[o]),b=i.useCallback(()=>{l(o),window.dispatchEvent(new CustomEvent(s,{detail:{key:o,value:n}}))},[]);return I("storage",t=>{t.storageArea===window[e]&&t.key===o&&g(v(t.newValue??void 0))}),I(s,t=>{t.detail.key===o&&g(t.detail.value)}),i.useEffect(()=>{n!==void 0&&d===void 0&&m(n)},[n,d,m]),i.useEffect(()=>{const t=w();t!==void 0&&m(t)},[]),[d===void 0?n:d,m,b]}}function N(e){return F("localStorage","use-local-storage")(e)}function V(){const[e,a]=N({key:"tasks-view",defaultValue:"list",getInitialValueInEffect:!1});return{tasksView:e,setTasksView:a}}export{V as u};
